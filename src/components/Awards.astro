---
import categories from '../data/categories.ts';
---

<section class="relative py-24 px-4 sm:px-6 lg:px-8 overflow-hidden">
  <div class="absolute inset-0 bg-linear-to-b from-transparent via-purple-600/5 to-red-600/5"></div>

  <div class="relative z-10 container mx-auto">
    <div class="text-center mb-16">
      <h2 class="text-5xl sm:text-6xl font-black mb-4 leading-tight">
        <span class="text-transparent bg-clip-text bg-linear-to-r from-red-500 to-orange-500">Categorías</span>
        <br />
        <span class="text-white">de Premios</span>
      </h2>
      <p class="text-gray-400 text-lg max-w-2xl mx-auto">
        Descubre todas las categorías especiales donde la creatividad y el talento son reconocidos
      </p>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
      {categories.map((award, index) => {
        // Lógica para centrar el último elemento si queda solo en la grilla
        const isLonelyLast = index === categories.length - 1 && categories.length % 3 === 1;
        
        // Optimización de imagen si viene de ImageKit
        const bgImage = award.image && award.image.includes('imagekit') 
            ? `${award.image}?tr=w-600,q-80,f-auto` // Calidad optimizada para fondos
            : (award.image || '');

        return (
          <a 
            href={`/categorias?id=${award.id}`}
            class={
              "group relative h-64 rounded-2xl overflow-hidden cursor-pointer transform transition-all duration-500 hover:scale-105 block " +
              (isLonelyLast ? "lg:col-start-2" : "")
            }
          >
            <div class="absolute inset-0 -z-10">
              {bgImage && (
                <img
                  src={bgImage}
                  alt={`Fondo ${award.title}`}
                  class="w-full h-full object-cover opacity-80 group-hover:opacity-95 transition-all duration-500 transform group-hover:scale-110"
                  loading="lazy"
                />
              )}
            </div>

            <div class="absolute inset-0 backdrop-blur-2xl bg-white/5"></div>

            <div class={"absolute inset-0 bg-linear-to-br " + award.color + " mix-blend-overlay opacity-45 group-hover:opacity-70 transition-all duration-300"}></div>

            <div class="absolute inset-0 bg-linear-to-t from-black/40 via-transparent to-transparent"></div>

            <div class="absolute inset-0 rounded-2xl border border-white/10 group-hover:border-white/30 transition-all duration-300 shadow-[0_10px_30px_rgba(0,0,0,0.35)]"></div>

            <div class="absolute inset-0 flex flex-col items-center justify-center p-6 text-center">
              <div class="text-6xl mb-4 transform group-hover:scale-125 transition-transform duration-300 filter drop-shadow-lg">
                {award.icon}
              </div>
              <h3 class="text-2xl font-black mb-2 text-white leading-tight">{award.title}</h3>
              <p class="text-white/85 text-sm line-clamp-2">{award.description}</p>
            </div>

            <div class="absolute -top-1/2 -right-1/2 w-full h-full bg-white/5 rounded-full blur-3xl group-hover:bg-white/10 transition-all duration-500 opacity-0 group-hover:opacity-100 pointer-events-none"></div>
          </a>
        );
      })}
    </div>
  </div>
</section>
